!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.vueContextData=e():t.vueContextData=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(e);var r=Object.prototype.toString,a=/^(String|Number|Boolean|Function|Symbol)$/;function c(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function i(t,e){var n,i=c(e);if(a.test(i)){var u=o(t);(n=u===i.toLowerCase())||"object"!==u||(n=t instanceof e)}else n="Object"===i?function(t){return"[object Object]"===r.call(t)}(t):"Array"===i?Array.isArray(t):t instanceof e;return{valid:n,expectedType:i}}function u(t){return r.call(t).slice(8,-1)}function f(t,e,n){if(void 0===e||void 0===t)return!0;var o=i(t,e);return o.valid||console.error('[vue-context-data warn]: Invalid context data: type check failed for prop "'.concat(n,'". Expected ').concat(o.expectedType,", got ").concat(u(t),".")),o.valid}var s=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e};function p(t,e){var n=t;if(void 0!==n)if("Object"===e||"Array"===e){if("Function"!==u(n))throw new Error('[vue-context-data warn]: Invalid default value for context data "'.concat(name,'": Context datas with type Object/Array must use a factory function to return the default value.'));n=n.apply(this)}else"Function"===e&&(n=n.bind(this));return n}var l={beforeCreate:function(){var t=this,e=this.$options.contextTypes;if(e){var n=Object.keys(e);this.__$$contextData={};for(var o=function(){var o=n[r],a=e[o];"Function"===u(a)&&(a={type:a});var i=a.type,l=c(i),d=a.default,v=a.parent,y=function t(e,n){if(e.$parent){var o=void 0;return n instanceof Function?n(e.$parent)&&(o=e.$parent):e.$parent.__$$context&&(o=e.$parent),o||t(e.$parent)}}(t,v);if(!y)return"break";var $=void 0;f($=y.__$$context&&y.__$$context.hasOwnProperty(o)&&void 0!==y.__$$context[o]?y[o]:p(d,l),i,o),t.__$$contextData[o]=$,y.$on("update-context:".concat(o),function(e){var n=e.value;void 0===n?n=p(d,l):f(n,i,o),t[o]=new s(n)})},r=0;r<n.length;r++){if("break"===o())break}for(var a=Object.keys(this.__$$contextData),i=function(){var e=a[l];t.$options.computed||(t.$options.computed={}),t.$options.computed[e]||(t.$options.computed[e]={get:function(){return this.__$$contextData[e]},set:function(t){t instanceof s?this.__$$contextData[e]=t.value:console.error("[vue-context-data]: context data ".concat(e," is not allowed to modifyï¼ŒPlease provide the action function by the parent context to manipulate the property"))}})},l=0;l<a.length;l++)i()}},data:function(){return{__$$contextData:this.__$$contextData}}},d={beforeCreate:function(){var t=this,e=this.$options.context;if(e){this.__$$context={},this.__$$contextWatch=[];for(var n=Object.keys(e),o=0;o<n.length;o++){var r=n[o],a=e[r];"Function"===c(a)&&(a={type:a});var i=c(a.type),s=a.value;if(void 0!==s)if("Object"===i||"Array"===i){if("Function"!==u(s))throw new Error('[vue-context-data warn]: Invalid context value for context data "'.concat(r,'": Context datas with type Object/Array must use a factory function to return the default value.'));s=s.apply(this)}else"Function"===i&&(s=s.bind(this));this.__$$context[r]={type:a.type,value:s}}for(var p=Object.keys(this.__$$context),l=function(){var e=p[d],n=t.__$$context[e];t.$options.computed||(t.$options.computed={}),t.$options.computed[e]||(t.$options.computed[e]={get:function(){return this.__$$context[e].value},set:function(t){f(t,n.type,e);var o=this.__$$context[e].value;this.__$$context[e]=Object.assign({},this.__$$context[e],{value:t}),this.$emit("update-context:".concat(e),{value:t,oldValue:o})}})},d=0;d<p.length;d++)l()}},data:function(){return{__$$context:this.__$$context}}};e.default={install:function(t){t.mixin(d),t.mixin(l)}}}])});